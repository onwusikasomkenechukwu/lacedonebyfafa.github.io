<!DOCTYPE HTML>
<html>
	<head>
		<title>Lace Done by Fafa</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
			/* Booking Section Styling */
			#booking-section {
				background: #fff;
				max-width: 800px;
				margin: 3rem auto;
				padding: 2rem;
				border-radius: 10px;
				box-shadow: 0 2px 8px rgba(0,0,0,0.1);
				font-family: 'Poppins', sans-serif;
			}
			#booking-section h2 {
				text-align: center;
				color: #f06292;
				border-bottom: 2px solid #eee;
				padding-bottom: 0.5rem;
			}
			#booking-section label {
				display: block;
				margin-top: 1rem;
				font-weight: 600;
				color: #333;
			}
			#booking-section select,
			#booking-section input,
			#booking-section textarea,
			#booking-section button {
				width: 100%;
				padding: 0.8rem;
				border: 1px solid #ccc;
				border-radius: 6px;
				margin-top: 0.5rem;
				font-size: 1rem;
			}
			#booking-section button {
				background: #f06292;
				color: white;
				border: none;
				cursor: pointer;
				transition: background 0.3s;
				margin-top: 1.5rem;
			}
			#booking-section button:hover {
				background: #e04579;
			}
			.hidden { display: none; }
			.summary {
				background: #fdf2f6;
				padding: 1rem;
				border-radius: 8px;
				margin-top: 1rem;
			}
		</style>
	</head>

	<body class="homepage is-preload">
		<div id="page-wrapper">

			<!-- Header -->
			<div id="header">
				<div class="inner">
					<header>
						<h1><a href="index.html" id="logo">☆Lace Done by Fafa☆</a></h1>
						<hr />
						<p>HTX | Howard U!</p>
					</header>
					<footer>
						<a href="#banner" class="button circled scrolly">✧</a>
					</footer>
				</div>

				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li><a href="index.html">HOME</a></li>
						<li>
							<a href="#booking-section">APPOINTMENTS</a>
							<ul>
								<li>
									<a href="#">LACE INSTALLS</a>
									<ul>
										<li><a href="#booking-section">FRONTAL INSTALL</a></li>
									</ul>
								</li>
								<li><a href="#">VIEW ALL APPOINTMENTS</a></li>
							</ul>
						</li>
					</ul>
				</nav>
			</div>

			<!-- Banner -->
			<section id="banner">
				<header>
					<h2>Welcome to <strong>Lace Done by Fafa</strong>.</h2>
					<p>Book your next flawless install — simple, smooth, and stunning.</p>
				</header>
			</section>

			<!-- Carousel -->
			<header>
				<h3><strong>STYLES</strong></h3>
			</header>
			<section class="carousel">
				<div class="reel">
					<article><a href="#" class="image featured"><img src="images/lace1.jpg" alt="" /></a></article>
					<article><a href="#" class="image featured"><img src="images/lace2.jpg" alt="" /></a></article>
					<article><a href="#" class="image featured"><img src="images/lace3.jpg" alt="" /></a></article>
				</div>
			</section>

			<!-- Main -->
			<div class="wrapper style2">
				<article id="main" class="container special">
					<header>
						<p>
							Get that perfect lace melt with Houston's finest — book your personalized install today.
						</p>
					</header>
					<footer>
						<a href="#booking-section" class="button scrolly">BOOK APPOINTMENT!</a>
					</footer>
				</article>
			</div>

			<!-- ✨ Booking Segment -->
			<section id="booking-section">
				<h2>Book Your Appointment</h2>

				<!-- Step 1 -->
				<div id="step1" class="section">
					<label for="service">Select Service:</label>
					<select id="service">
						<option value="">-- Choose a service --</option>
						<option value="frontal">Frontal Install - $85</option>
					</select>
					<button onclick="nextStep(2)">Next →</button>
				</div>

				<!-- Step 2 -->
				<div id="step2" class="hidden">
					<label for="date">Select Date:</label>
					<input type="date" id="date" />
					<label for="time">Select Time:</label>
					<select id="time">
						<option value="">-- Choose a time --</option>
						<option>9:00 AM</option>
						<option>11:00 AM</option>
						<option>1:00 PM</option>
						<option>3:00 PM</option>
						<option>5:00 PM</option>
					</select>
					<button onclick="nextStep(3)">Next →</button>
				</div>

				<!-- Step 3 -->
				<div id="step3" class="hidden">
					<label for="name">Full Name:</label>
					<input type="text" id="name" placeholder="Jane Doe" />
					<label for="email">Email:</label>
					<input type="email" id="email" placeholder="janedoe@example.com" />
					<label for="notes">Additional Notes (optional):</label>
					<textarea id="notes" rows="4" placeholder="Any special requests?"></textarea>
					<button onclick="showSummary()">Review Appointment →</button>
				</div>

				<!-- Step 4 -->
				<div id="step4" class="hidden">
					<h3>Confirm Your Appointment</h3>
					<div class="summary" id="summary"></div>
					<button onclick="generateCalendarLinks()">Confirm & Add to Calendar</button>
				</div>

				<!-- Confirmation -->
				<div id="confirmation" class="hidden">
					<h3>✅ Appointment Confirmed!</h3>
					<p>Thank you for booking with Lace Done by Fafa. You can add your appointment to your calendar below:</p>
					<a id="googleLink" target="_blank" class="button">Add to Google Calendar</a>
					<button onclick="generateICS()">Add to Apple Calendar</button>
				</div>
			</section>

			<!-- Footer -->
			<div id="footer">
				<div class="container">
					<hr />
					<div class="copyright">
						<ul class="menu">
							<li>&copy; Lace Done by Fafa. All rights reserved.</li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

		<!-- Booking Logic -->
<script src="https://cdn.emailjs.com/sdk/3.11.0/email.min.js"></script>
<script>
	emailjs.init("YOUR_EMAILJS_PUBLIC_KEY"); // replace with your actual EmailJS public key

	function nextStep(step) {
		for (let i = 1; i <= 4; i++) document.getElementById("step" + i).classList.add("hidden");
		document.getElementById("step" + step).classList.remove("hidden");
	}

	function showSummary() {
		const service = serviceEl.value, date = dateEl.value, time = timeEl.value,
			  name = nameEl.value, email = emailEl.value, notes = notesEl.value;
		if (!service || !date || !time || !name || !email) {
			alert("Please fill all required fields before continuing.");
			return;
		}
		summaryDiv.innerHTML = `
			<p><strong>Service:</strong> ${service}</p>
			<p><strong>Date:</strong> ${date}</p>
			<p><strong>Time:</strong> ${time}</p>
			<p><strong>Name:</strong> ${name}</p>
			<p><strong>Email:</strong> ${email}</p>
			<p><strong>Notes:</strong> ${notes || "None"}</p>`;
		nextStep(4);
	}

	function generateCalendarLinks() {
		const service = document.getElementById("service").value;
		const date = document.getElementById("date").value;
		const time = document.getElementById("time").value;
		const notes = document.getElementById("notes").value;
		const name = document.getElementById("name").value;
		const email = document.getElementById("email").value;

		const start = new Date(`${date}T${time}:00`);
		const end = new Date(start.getTime() + 60 * 60 * 1000);
		const formatDate = d => d.toISOString().replace(/-|:|\.\d+/g, "");
		const googleLink = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(service)}&dates=${formatDate(start)}/${formatDate(end)}&details=${encodeURIComponent(notes)}&location=Houston`;
		document.getElementById("googleLink").href = googleLink;

		// Send confirmation email
		emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
			to_email: email,
			client_name: name,
			service_name: service,
			appointment_date: date,
			appointment_time: time,
			notes: notes
		}).then(() => {
			console.log("Confirmation email sent!");
		}).catch(err => console.error("EmailJS error:", err));

		// Add appointment to your Google Calendar (via Google Apps Script)
		fetch("https://script.google.com/macros/s/AKfycbzyqszcGuFpfXkpSGNR6s2r_U8VEddAHJw1TkLSibixaBXDhQYzSclRDcsL0qipS0WbVg/exec", {
			method: "POST",
			headers: { "Content-Type": "application/json" },
			body: JSON.stringify({ service, date, time, name, email, notes })
		}).then(res => res.text())
		  .then(data => console.log("Google Calendar response:", data))
		  .catch(err => console.error("Calendar sync error:", err));

		for (let i = 1; i <= 4; i++) document.getElementById("step" + i).classList.add("hidden");
		document.getElementById("confirmation").classList.remove("hidden");
	}

	function generateICS() {
		const service = serviceEl.value;
		const date = dateEl.value;
		const time = timeEl.value;
		const notes = notesEl.value;
		const start = new Date(`${date}T${time}:00`);
		const end = new Date(start.getTime() + 60 * 60 * 1000);
		const icsData = `
BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:${service}
DTSTART:${start.toISOString().replace(/[-:]/g, '').split('.')[0]}Z
DTEND:${end.toISOString().replace(/[-:]/g, '').split('.')[0]}Z
DESCRIPTION:${notes}
END:VEVENT
END:VCALENDAR
`;
		const blob = new Blob([icsData], { type: "text/calendar" });
		const link = document.createElement("a");
		link.href = URL.createObjectURL(blob);
		link.download = "appointment.ics";
		link.click();
	}

	// Cache elements
	const serviceEl = document.getElementById("service"),
		  dateEl = document.getElementById("date"),
		  timeEl = document.getElementById("time"),
		  nameEl = document.getElementById("name"),
		  emailEl = document.getElementById("email"),
		  notesEl = document.getElementById("notes"),
		  summaryDiv = document.getElementById("summary");
</script>

	</body>
</html>
